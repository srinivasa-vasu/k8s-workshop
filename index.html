<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Kubernetes (K8s) Workshop</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Varela+Round|Open+Sans:400italic,600italic,400,600|Ubuntu+Mono:400);
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fefdfd; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Open Sans", sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.stretch { width: 100%; }

p.lead { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.25; color: #002c5e; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #005580; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #078d71; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Varela Round", sans-serif; font-weight: 400; font-style: normal; color: #00326b; text-rendering: optimizeLegibility; margin-top: 0.8em; margin-bottom: 0.5em; line-height: 1.0625em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #057aff; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid rgba(145, 135, 84, 0.15); border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Ubuntu Mono", "Inconsolata", monospace; font-weight: 400; color: #331d00; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #666666; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #666666; }

blockquote, blockquote p { line-height: 1.5; color: #999999; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.25; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px rgba(145, 135, 84, 0.15); }
table thead, table tfoot { background: rgba(119, 84, 22, 0.1); font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: rgba(119, 84, 22, 0.025); }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.5; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.25; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

:not(pre):not([class^=L]) > code { font-size: 1.0625em; font-style: normal !important; letter-spacing: 0; padding: 0; line-height: 1.25; word-wrap: break-word; }

:not(pre) > code.nobreak { word-wrap: normal; }
:not(pre) > code.nowrap { white-space: nowrap; }

pre { color: inherit; font-family: "Liberation Mono", "Consolas", monospace; line-height: 1.4; }
pre code, pre pre { color: inherit; font-size: inherit; line-height: inherit; }
pre > code { display: block; }

pre.nowrap, pre.nowrap pre { white-space: pre; word-wrap: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: rgba(51, 51, 51, 0.8); }

kbd { font-family: "Ubuntu Mono", "Inconsolata", monospace; display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: #1a0f00; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #703f1c; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid rgba(145, 135, 84, 0.15); }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid rgba(145, 135, 84, 0.15); padding-bottom: 8px; }
#header .details { border-bottom: 1px solid rgba(145, 135, 84, 0.15); line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #666666; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #999999; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #999999; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #703f1c; border-bottom: 1px solid rgba(145, 135, 84, 0.15); padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Varela Round", sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #002c5e; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background: #f2f2f4; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d6d6dd; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f4; -webkit-border-radius: 6px; border-radius: 6px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background: #0b445a; padding: 1.25em; }

#footer-text { color: #fefdfd; line-height: 1.35; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #00326b; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #002652; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock.fit-content > caption.title { white-space: nowrap; width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: 1.21875em; line-height: 1.6; color: #703f1c; }

table.tableblock #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Varela Round", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid rgba(145, 135, 84, 0.15); color: #666666; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #eddbdb; margin-bottom: 1.25em; padding: 1.25em; background: #fefdfd; -webkit-border-radius: 6px; border-radius: 6px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d1d1d8; margin-bottom: 1.25em; padding: 1.25em; background: #ececef; -webkit-border-radius: 6px; border-radius: 6px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #002c5e; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock > .content > pre { border: 1px solid rgba(16, 195, 196, 0.125); -webkit-border-radius: 6px; border-radius: 6px; word-wrap: break-word; overflow-x: auto; padding: 1em; font-size: 0.8125em; }
@media only screen and (min-width: 768px) { .literalblock pre, .listingblock > .content > pre { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .listingblock > .content > pre { font-size: 1em; } }

.literalblock.output pre { color: rgba(16, 195, 196, 0.05); background-color: inherit; }

.listingblock > .content > pre:not(.highlight), .listingblock > .content > pre[class="highlight"], .listingblock > .content > pre[class^="highlight "] { background: rgba(16, 195, 196, 0.05); }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: inherit; opacity: 0.5; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: inherit; opacity: 0.5; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 6px; border-radius: 6px; }

.prettyprint { background: rgba(16, 195, 196, 0.05); }

pre.prettyprint .linenums { line-height: 1.4; margin-left: 2em; }

pre.prettyprint li { background: none; list-style-type: inherit; padding-left: 0; }

pre.prettyprint li code[data-lang]:before { opacity: 1; }

pre.prettyprint li:not(:first-child) code[data-lang]:before { display: none; }

table.linenotable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }
table.linenotable td[class] { color: inherit; vertical-align: top; padding: 0; line-height: inherit; white-space: normal; }
table.linenotable td.code { padding-left: 0.75em; }
table.linenotable td.linenos { border-right: 1px solid currentColor; opacity: 0.35; padding-right: 0.5em; }

pre.pygments .lineno { border-right: 1px solid currentColor; opacity: 0.35; display: inline-block; margin-right: 0.75em; }
pre.pygments .lineno:before { content: ""; margin-right: -0.125em; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock p { color: #999999; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #002c5e; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.75em; margin-right: 0.5ex; text-align: right; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #999999; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #666666; }

.quoteblock.abstract blockquote:before, .quoteblock.excerpt blockquote:before, .quoteblock .quoteblock blockquote:before { display: none; }
.quoteblock.abstract blockquote, .quoteblock.abstract p, .quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { line-height: 1.6; word-spacing: 0; }
.quoteblock.abstract { margin: 0 1em 1.25em 1em; display: block; }
.quoteblock.abstract > .title { margin: 0 0 0.375em 0; font-size: 1.15em; text-align: center; }
.quoteblock.excerpt, .quoteblock .quoteblock { margin: 0 0 1.25em 0; padding: 0 0 0.25em 1em; border-left: 0.25em solid rgba(145, 135, 84, 0.15); }
.quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { color: inherit; font-size: 1.0625rem; }
.quoteblock.excerpt .attribution, .quoteblock .quoteblock .attribution { color: inherit; text-align: left; margin-right: 0; }

table.tableblock { max-width: 100%; border-collapse: separate; }

p.tableblock:last-child { margin-bottom: 0; }

td.tableblock > .content { margin-bottom: -1.25em; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid rgba(145, 135, 84, 0.15); }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot, table.frame-ends { border-width: 1px 0; }

table.stripes-all tr, table.stripes-odd tr:nth-of-type(odd) { background: rgba(119, 84, 22, 0.025); }

table.stripes-none tr, table.stripes-odd tr:nth-of-type(even) { background: none; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.5; background: rgba(119, 84, 22, 0.1); }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.625em -1.25em; }

ul.inline > li { margin-left: 1.25em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist td:not([class]):first-child { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist td:not([class]):first-child img { max-width: none; }
.colist td:not([class]):last-child { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #004060; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

#toc.toc2 ul ul { list-style-type: circle; padding-left: 2em; }

.sect1 { padding-bottom: 0 !important; margin-bottom: 2.5em; }

#header h1 { font-weight: bold; position: relative; left: -0.0625em; }

#content h2, #content h3, #content #toctitle, #content .sidebarblock > .content > .title, #content h4, #content h5, #content #toctitle { position: relative; left: -0.0625em; }
#content h2 { font-weight: bold; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

pre.pygments.highlight { background-color: rgba(16, 195, 196, 0.05); }

.pygments .tok-err { border: none !important; color: #800000 !important; }

.pygments .tok-c { color: #999 !important; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Kubernetes (K8s) Workshop</h1>
<div id="toc" class="toc2">
<div id="toctitle">Work Bundles</div>
<ul class="sectlevel1">
<li><a href="#_genesis">Genesis</a>
<ul class="sectlevel2">
<li><a href="#_node_labels">Node labels</a>
<ul class="sectlevel3">
<li><a href="#_add_labels">Add labels</a></li>
<li><a href="#_clean_up">Clean-up</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_atom_of_k8s">Atom of K8s</a>
<ul class="sectlevel2">
<li><a href="#_pod">Pod</a>
<ul class="sectlevel3">
<li><a href="#_create_an_atom">Create an atom</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_2">Clean-up</a></li>
</ul>
</li>
<li><a href="#_assign_resources_requests_limits">Assign Resources requests &amp; limits</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_3">Clean-up</a></li>
</ul>
</li>
<li><a href="#_health_check">Health Check</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_4">Clean-up</a></li>
</ul>
</li>
<li><a href="#_lifecycle_hooks">Lifecycle Hooks</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_5">Clean-up</a></li>
</ul>
</li>
<li><a href="#_pod_node_binding">Pod Node binding</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_6">Clean-up</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_its_the_replicaset">It&#8217;s the ReplicaSet</a>
<ul class="sectlevel2">
<li><a href="#_replicaset">ReplicaSet</a>
<ul class="sectlevel3">
<li><a href="#_create_a_replicaset">Create a ReplicaSet</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_7">Clean-up</a></li>
</ul>
</li>
<li><a href="#_pod_hard_affinity">Pod Hard Affinity</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_8">Clean-up</a></li>
</ul>
</li>
<li><a href="#_pod_soft_affinity">Pod Soft Affinity</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_9">Clean-up</a></li>
</ul>
</li>
<li><a href="#_anti_affinity">Anti-Affinity</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_10">Clean-up</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_node_pod_association">Node-Pod association</a>
<ul class="sectlevel2">
<li><a href="#_taint_and_tolerations">Taint and Tolerations</a>
<ul class="sectlevel3">
<li><a href="#_tolerate_a_taint">Tolerate a Taint</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_11">Clean-up</a></li>
</ul>
</li>
<li><a href="#_un_tolerate_a_taint">Un-tolerate a Taint</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_12">Clean-up</a></li>
</ul>
</li>
<li><a href="#_runtime_taint">Runtime Taint</a>
<ul class="sectlevel4">
<li><a href="#_clean_up_13">Clean-up</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_lets_get_to_deployment">Let&#8217;s get to Deployment</a>
<ul class="sectlevel2">
<li><a href="#_deployment">Deployment</a>
<ul class="sectlevel3">
<li><a href="#_create_a_deployment">Create a Deployment</a></li>
<li><a href="#_update_a_deployment">Update a Deployment</a>
<ul class="sectlevel4">
<li><a href="#_recreate">Recreate</a>
<ul class="sectlevel5">
<li><a href="#_clean_up_14">Clean-up</a></li>
</ul>
</li>
<li><a href="#_rollingupdate">RollingUpdate</a>
<ul class="sectlevel5">
<li><a href="#_clean_up_15">Clean-up</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_externalize_configmap">Externalize ConfigMap</a></li>
<li><a href="#_service_discovery">Service Discovery</a></li>
<li><a href="#_no_more_secrets">No more Secrets</a></li>
<li><a href="#_initialize_with_a_container">Initialize with a Container</a></li>
<li><a href="#_volume_rules">Volume Rules</a></li>
<li><a href="#_containers_gang">Containers Gang</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong><em>Time to complete 6hrs</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_genesis"><a class="anchor" href="#_genesis"></a><a class="link" href="#_genesis">Genesis</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 15ms</em></strong>
</td>
</tr>
</table>
</div>
<div class="sect2 schedule">
<h3 id="_node_labels"><a class="anchor" href="#_node_labels"></a><a class="link" href="#_node_labels">Node labels</a></h3>
<div class="paragraph schedule">
<p>In this exercise, we shall look at setting labels to a K8s node. It can be done in multiple ways. We shall look at the following options,</p>
</div>
<div class="ulist checklist schedule">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="1" checked> kubecl cli</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> K8s manifest</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> API</p>
</li>
</ul>
</div>
<div class="sect3 schedule">
<h4 id="_add_labels"><a class="anchor" href="#_add_labels"></a><a class="link" href="#_add_labels">Add labels</a></h4>
<div class="listingblock schedule">
<div class="title">List the nodes in your cluster</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get nodes -o wide</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will get an output similar to this based on the cluster size,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME       STATUS    ROLES     AGE       VERSION
vm-1234    Ready     &lt;none&gt;    35h       v1.12.4
vm-4567    Ready     &lt;none&gt;    35h       v1.12.4</code></pre>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Choose one of the nodes and add a label to it</div>
<div class="content">
<pre class="highlight"><code class="language-kubectl" data-lang="kubectl">kubectl label nodes vm-1234 role=schedule</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 1. Same can be done by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">sh 00-Node/_1.apply.sh</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/00-Node/_1.apply.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/00-Node/_1.apply.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that your chosen node as role=schedule label applied</div>
<div class="content">
<pre class="highlight"><code>kubectl get nodes --show-labels</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME       STATUS    ROLES     AGE       VERSION   LABELS
vm-1234    Ready     &lt;none&gt;    36h       v1.12.4   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/hostname=minikube,role=schedule</code></pre>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_clean_up"><a class="anchor" href="#_clean_up"></a><a class="link" href="#_clean_up">Clean-up</a></h4>
<div class="exampleblock schedule">
<div class="title">Example 2. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 00-Node/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/00-Node/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/00-Node/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_atom_of_k8s"><a class="anchor" href="#_atom_of_k8s"></a><a class="link" href="#_atom_of_k8s">Atom of K8s</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
<div class="paragraph schedule">
<p>A pod is the atom of K8s. It is the fundamental unit of deployment with a group of one or more containers (such as Docker containers), with shared storage/network, and a specification for how to run the containers.</p>
</div>
<div class="paragraph schedule">
<p>In this exercise, we shall cover the following operations using K8s manifests,</p>
</div>
<div class="ulist checklist schedule">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="1" checked> Creating a <em class="schedule">Pod</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">cgroup</em> resources and limits</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Healthcheck</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Lifecycle</em> hooks</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Pod:Node</em> association</p>
</li>
</ul>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Will install all the objects to the <em class="schedule">default</em> namespace.
</td>
</tr>
</table>
</div>
<div class="sect2 schedule">
<h3 id="_pod"><a class="anchor" href="#_pod"></a><a class="link" href="#_pod">Pod</a></h3>
<div class="sect3 schedule">
<h4 id="_create_an_atom"><a class="anchor" href="#_create_an_atom"></a><a class="link" href="#_create_an_atom">Create an atom</a></h4>
<div class="listingblock schedule">
<div class="title">List the pods in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 3. Create a new Pod by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  01-Pod/01.Pod.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/01.Pod.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/01.Pod.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that a pod named spring-music gets created</div>
<div class="content">
<pre class="highlight"><code>kubectl get pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           READY     STATUS    RESTARTS   AGE
spring-music      1/1       Running   0          11s</code></pre>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_2"><a class="anchor" href="#_clean_up_2"></a><a class="link" href="#_clean_up_2">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 4. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 01-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Unlike other manifests, only a limited fields of <em class="schedule">Pod</em> spec can be overridden. Hence it is recommended to clean-up resources before moving to the next example.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_assign_resources_requests_limits"><a class="anchor" href="#_assign_resources_requests_limits"></a><a class="link" href="#_assign_resources_requests_limits">Assign Resources requests &amp; limits</a></h4>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
CPU and memory are each a resource type. A resource type has a base unit. CPU is specified in units of cores, and memory is specified in units of bytes. CPU and memory are collectively referred to as compute resources, or just resources. Compute resources are measurable quantities that can be requested, allocated, and consumed.
</td>
</tr>
</table>
</div>
<div class="exampleblock schedule">
<div class="title">Example 5. Create a new pod by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  01-Pod/02.Pod-resource-limit.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/02.Pod-resource-limit.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/02.Pod-resource-limit.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that a pod named spring-music gets created</div>
<div class="content">
<pre class="highlight"><code>kubectl get pods/spring-music -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,CPU_REQUEST:spec.containers[*].resources.requests.cpu,CPU_LIMITT:.spec.containers[*].resources.limits.cpu,MEM_REQUEST:spec.containers[*].resources.requests.memory,MEM_LIMITT:.spec.containers[*].resources.limits.memory</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           STATUS    CPU_REQUEST   CPU_LIMITT   MEM_REQUEST   MEM_LIMITT
spring-music      Running   250m          750m         768M          1G</code></pre>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Although requests and limits can only be specified on individual Containers, a Pod resource request/limit for a particular resource type is the sum of the resource requests/limits of that type for each Container in the Pod
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_3"><a class="anchor" href="#_clean_up_3"></a><a class="link" href="#_clean_up_3">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 6. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 01-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Unlike other manifests, only a limited fields of <em class="schedule">Pod</em> spec can be overridden. Hence it is recommended to clean-up resources before moving to the next example.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_health_check"><a class="anchor" href="#_health_check"></a><a class="link" href="#_health_check">Health Check</a></h4>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph schedule">
<p><strong class="schedule"><em class="schedule">Liveness probe</em></strong> is used by Kubelet to know when to restart a Container. For example, liveness probes could catch a deadlock, where an application is running, but unable to make progress. Restarting a Container in such a state can help to make the application more available despite bugs.</p>
</div>
<div class="paragraph schedule">
<p><strong class="schedule"><em class="schedule">Readiness probe</em></strong> is used by Kubelete to know when a Container is ready to start accepting traffic.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock schedule">
<div class="title">Example 7. Create a new pod by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  01-Pod/03.Pod-health-check.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/03.Pod-health-check.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/03.Pod-health-check.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that a pod named spring-music gets created</div>
<div class="content">
<pre class="highlight"><code>kubectl get pods/spring-music -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,READINESS_PROBE:.spec.containers[*].readinessProbe.httpGet.path,LIVENESS_PROBE:.spec.containers[*].livenessProbe.httpGet.path</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           STATUS    READINESS_PROBE    LIVENESS_PROBE
spring-music      Running   /actuator/health   /actuator/health</code></pre>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A Pod is considered ready when all of its Containers are ready. One use of this signal is to control which Pods are used as backends for Services. When a Pod is not ready, it is removed from Service load balancers.
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_4"><a class="anchor" href="#_clean_up_4"></a><a class="link" href="#_clean_up_4">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 8. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 01-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Unlike other manifests, only a limited fields of <em class="schedule">Pod</em> spec can be overridden. Hence it is recommended to clean-up resources before moving to the next example.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_lifecycle_hooks"><a class="anchor" href="#_lifecycle_hooks"></a><a class="link" href="#_lifecycle_hooks">Lifecycle Hooks</a></h4>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph schedule">
<p>There are two hooks that are exposed to Containers:</p>
</div>
<div class="ulist schedule">
<ul>
<li>
<p><strong class="schedule"><em class="schedule">PostStart</em></strong> executes immediately after a container is created. However, there is no guarantee that the hook will execute before the container ENTRYPOINT. No parameters are passed to the handler.</p>
</li>
<li>
<p><strong class="schedule"><em class="schedule">PreStop</em></strong> is called immediately before a container is terminated. It is blocking, meaning it is synchronous, so it must complete before the call to delete the container can be sent. No parameters are passed to the handler</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock schedule">
<div class="title">Example 9. Create a new pod by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  01-Pod/04.Pod-lifecycle-hook.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/04.Pod-lifecycle-hook.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/04.Pod-lifecycle-hook.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that a pod named spring-music gets created</div>
<div class="content">
<pre class="highlight"><code>kubectl get pods/spring-music</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           READY     STATUS    RESTARTS   AGE
spring-music      1/1       Running   0          11s</code></pre>
</div>
</div>
<div class="listingblock schedule">
<div class="title">ssh to the container to look into the content of /usr/share/message file to verify that the <em class="schedule">postStart</em> script got executed</div>
<div class="content">
<pre class="highlight"><code>kubectl exec -it spring-music -- /bin/sh

more /usr/share/message</code></pre>
</div>
</div>
<div class="admonitionblock important schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>Hello Spring K8s folks</code></pre>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_5"><a class="anchor" href="#_clean_up_5"></a><a class="link" href="#_clean_up_5">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 10. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 01-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Unlike other manifests, only a limited fields of <em class="schedule">Pod</em> spec can be overridden. Hence it is recommended to clean-up resources before moving to the next example.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_pod_node_binding"><a class="anchor" href="#_pod_node_binding"></a><a class="link" href="#_pod_node_binding">Pod Node binding</a></h4>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph schedule">
<p>You can constrain a pod to only be able to run on particular nodes or to prefer to run on particular nodes. There are several ways to do this, and will look at how to use label selectors to make the selection</p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock schedule">
<div class="title">Example 11. Create a new pod by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f 01-Pod/05.Pod-node-selector.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/05.Pod-node-selector.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/05.Pod-node-selector.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify the output of the command</div>
<div class="content">
<pre class="highlight"><code>kubectl get pods/spring-music</code></pre>
</div>
</div>
<div class="admonitionblock warning schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           READY     STATUS    RESTARTS   AGE
spring-music      0/1       Pending   0          4s</code></pre>
</div>
</div>
<div class="paragraph schedule">
<p>Status of the pod would be pending as we have tried to assign it to a node with label having key as <em class="schedule">role</em> and value as <em class="schedule">schedule</em>, but none of the nodes will have the label. Refer <a href="#_add_labels" class="schedule">Add labels</a> section to assign the required label.</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this. Now the pod schedule should have happened to the node with label having key as <em class="schedule">role</em> and value as <em class="schedule">schedule</em>
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME           READY     STATUS    RESTARTS   AGE
spring-music      1/1       Running   0          11s</code></pre>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_6"><a class="anchor" href="#_clean_up_6"></a><a class="link" href="#_clean_up_6">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 12. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">sh 01-Pod/_1.clean.sh</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/01-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you delete a pod, it won&#8217;t get created automatically.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_its_the_replicaset"><a class="anchor" href="#_its_the_replicaset"></a><a class="link" href="#_its_the_replicaset">It&#8217;s the ReplicaSet</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
<div class="paragraph schedule">
<p>A ReplicaSets purpose is to maintain a stable set of replica Pods running at any given time. As such, it is often used to guarantee the availability of a specified number of identical Pods.</p>
</div>
<div class="paragraph schedule">
<p>In this exercise, we shall cover the following operations using K8s manifests,</p>
</div>
<div class="ulist checklist schedule">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="1" checked> Creating a <em class="schedule">ReplicaSet</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> Scheduling time <em class="schedule">Hard</em> Node <em class="schedule">Affinity</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> Scheduling time <em class="schedule">Soft</em> Node <em class="schedule">Affinity</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> Scheduling time <em class="schedule">Anti-Affinity</em></p>
</li>
</ul>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Will install all the objects to the <em class="schedule">default</em> namespace.
</td>
</tr>
</table>
</div>
<div class="sect2 schedule">
<h3 id="_replicaset"><a class="anchor" href="#_replicaset"></a><a class="link" href="#_replicaset">ReplicaSet</a></h3>
<div class="sect3 schedule">
<h4 id="_create_a_replicaset"><a class="anchor" href="#_create_a_replicaset"></a><a class="link" href="#_create_a_replicaset">Create a ReplicaSet</a></h4>
<div class="listingblock schedule">
<div class="title">List the replicasets in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get rs</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 13. Create a ReplicaSet by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  02-ReplicaSet/01.ReplicaSet.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/01.ReplicaSet.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/01.ReplicaSet.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify that a rs named spring-music gets created</div>
<div class="content">
<pre class="highlight"><code>kubectl get rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      1         1         1         6s

NAME               READY     STATUS    RESTARTS   AGE
pod/spring-music   1/1          Running   0          22m</code></pre>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_7"><a class="anchor" href="#_clean_up_7"></a><a class="link" href="#_clean_up_7">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 14. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 02-ReplicaSet/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_pod_hard_affinity"><a class="anchor" href="#_pod_hard_affinity"></a><a class="link" href="#_pod_hard_affinity">Pod Hard Affinity</a></h4>
<div class="exampleblock schedule">
<div class="title">Example 15. Create a ReplicaSet by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  02-ReplicaSet/02.ReplicaSet-node-affinity-hard.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/02.ReplicaSet-node-affinity-hard.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/02.ReplicaSet-node-affinity-hard.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify the output of the command</div>
<div class="content">
<pre class="highlight"><code>kubectl get rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      1         1         0         3s

NAME                     READY     STATUS    RESTARTS   AGE
pod/spring-music-j2pl2      0/1       Pending   0          3s</code></pre>
</div>
</div>
<div class="paragraph schedule">
<p>Status of the pod would be pending because of the affinity rule <em class="schedule">requiredDuringSchedulingIgnoredDuringExecution</em>.</p>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
requiredDuringSchedulingIgnoredDuringExecution must be met for a pod to be scheduled onto a node. In this case it would be only run the pod on nodes with with label having key as <em class="schedule">role</em> and value as <em class="schedule">schedule</em>".
</td>
</tr>
</table>
</div>
<div class="paragraph schedule">
<p>Refer <a href="#_add_labels" class="schedule">Add labels</a> section to assign the required label.</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      1         1         1         6s

NAME                  READY        STATUS    RESTARTS   AGE
pod/spring-music-j2pl2   1/1          Running   0          22m</code></pre>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_8"><a class="anchor" href="#_clean_up_8"></a><a class="link" href="#_clean_up_8">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 16. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 02-ReplicaSet/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_pod_soft_affinity"><a class="anchor" href="#_pod_soft_affinity"></a><a class="link" href="#_pod_soft_affinity">Pod Soft Affinity</a></h4>
<div class="exampleblock schedule">
<div class="title">Example 17. Create a ReplicaSet by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  02-ReplicaSet/03.ReplicaSet-node-affinity-soft.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/03.ReplicaSet-node-affinity-soft.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/03.ReplicaSet-node-affinity-soft.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify the output of the command</div>
<div class="content">
<pre class="highlight"><code>kubectl get rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      1         1         1         6s

NAME                  READY        STATUS    RESTARTS   AGE
pod/spring-music-j2pl2   1/1          Running   0          22m</code></pre>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
preferredDuringSchedulingIgnoredDuringExecution is a soft affinity. It specifies preferences that the scheduler will try to enforce but will not guarantee.
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_9"><a class="anchor" href="#_clean_up_9"></a><a class="link" href="#_clean_up_9">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 18. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 02-ReplicaSet/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_anti_affinity"><a class="anchor" href="#_anti_affinity"></a><a class="link" href="#_anti_affinity">Anti-Affinity</a></h4>
<div class="exampleblock schedule">
<div class="title">Example 19. Create a ReplicaSet by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f  02-ReplicaSet/04.ReplicaSet-pod-antiaffinity.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/04.ReplicaSet-pod-antiaffinity.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/04.ReplicaSet-pod-antiaffinity.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify the output of the command</div>
<div class="content">
<pre class="highlight"><code>kubectl get rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      2         2         0         6s

NAME                     READY     STATUS    RESTARTS   AGE
pod/spring-music-s4dcw      1/1       Running   0          5s
pod/spring-music-tzpt8      0/1       Pending   0          5s</code></pre>
</div>
</div>
<div class="paragraph schedule">
<p>In this example, we are trying to run two instances of <em class="schedule">spring-music</em> by having <em class="schedule">replicas</em> as 2 with one worker node.</p>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
podAntiAffinity rule makes sure that instances get distributed across nodes and no two instances of it lands in the same node.
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_10"><a class="anchor" href="#_clean_up_10"></a><a class="link" href="#_clean_up_10">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 20. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 02-ReplicaSet/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/02-ReplicaSet/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_node_pod_association"><a class="anchor" href="#_node_pod_association"></a><a class="link" href="#_node_pod_association">Node-Pod association</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
<div class="paragraph schedule">
<p>Node affinity, is a property of pods that attracts them to a set of nodes (either as a preference or a hard requirement). Taints are the opposite  they allow a node to repel a set of pods.</p>
</div>
<div class="paragraph schedule">
<p>Taints and tolerations work together to ensure that pods are not scheduled onto inappropriate nodes. One or more taints are applied to a node; this marks that the node should not accept any pods that do not tolerate the taints. Tolerations are applied to pods, and allow (but do not require) the pods to schedule onto nodes with matching taints</p>
</div>
<div class="paragraph schedule">
<p>In this exercise, we shall cover the following operations using K8s manifests,</p>
</div>
<div class="ulist checklist schedule">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Tolerating</em> a Node <em class="schedule">Taint</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Un-tolerating</em> a Node <em class="schedule">Taint</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Runtime Node _Taint</em></p>
</li>
</ul>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Will install all the objects to the <em class="schedule">default</em> namespace.
</td>
</tr>
</table>
</div>
<div class="sect2 schedule">
<h3 id="_taint_and_tolerations"><a class="anchor" href="#_taint_and_tolerations"></a><a class="link" href="#_taint_and_tolerations">Taint and Tolerations</a></h3>
<div class="sect3 schedule">
<h4 id="_tolerate_a_taint"><a class="anchor" href="#_tolerate_a_taint"></a><a class="link" href="#_tolerate_a_taint">Tolerate a Taint</a></h4>
<div class="listingblock schedule">
<div class="title">List the replicasets in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get rs</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 21. Create the node and pod objects by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">sh 03-Node-Pod/01_.apply.sh</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/01_.apply.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/01_.apply.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>kubectl get nodes -o yaml -o jsonpath={".items[*].spec.taints}"

[map[effect:NoSchedule key:dedicated value:host]]

kubectl get pods -o yaml -o jsonpath={".items[*].spec.tolerations}"

[map[effect:NoSchedule key:dedicated operator:Equal value:host]</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It places a <em class="schedule">taint</em> on the chosen node with key as dedicated, value as host, and taint effect NoSchedule. This means that no pod will be able to schedule onto the node unless it has a matching toleration. To schedule a pod onto the node we have to have matching <em class="schedule">toleration</em> in the PodSpec
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_11"><a class="anchor" href="#_clean_up_11"></a><a class="link" href="#_clean_up_11">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 22. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 03-Node-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/01_.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/01_.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_un_tolerate_a_taint"><a class="anchor" href="#_un_tolerate_a_taint"></a><a class="link" href="#_un_tolerate_a_taint">Un-tolerate a Taint</a></h4>
<div class="listingblock schedule">
<div class="title">List the replicasets in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get rs</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 23. Create the node and pod objects by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">sh 03-Node-Pod/02_.apply.sh</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/02_.apply.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/02_.apply.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>kubectl get nodes -o yaml -o jsonpath={".items[*].spec.taints}"

[map[effect:NoSchedule key:dedicated value:host]]

kubectl get pods -o yaml -o jsonpath={".items[*].spec.tolerations}"

[map[]]

kubectl get rs,pods
NAME                                 DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music      1         1         0         20s

NAME                     READY     STATUS    RESTARTS   AGE
pod/spring-music-vbbkl      0/1       Pending   0          20s</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pod will be in pending state as it can&#8217;t tolerate the taint
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_12"><a class="anchor" href="#_clean_up_12"></a><a class="link" href="#_clean_up_12">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 24. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 03-Node-Pod/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/02_.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/02_.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_runtime_taint"><a class="anchor" href="#_runtime_taint"></a><a class="link" href="#_runtime_taint">Runtime Taint</a></h4>
<div class="listingblock schedule">
<div class="title">List the replicasets in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get rs</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 25. Create the node and pod objects by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">sh 03-Node-Pod/03_.Node-taint-match-no-match-apply.sh</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/03_.Node-taint-match-no-match-apply.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/03_.Node-taint-match-no-match-apply.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>watch kubectl get pods
Every 2.0s: kubectl get pods                                                                                                                                                                           sv.local: Sun Feb 10 16:05:03 2019

NAME                 READY     STATUS    RESTARTS   AGE
spring-music-6mdvd   1/1       Running   0          11s

NAME                 READY     STATUS    RESTARTS   AGE
spring-music-w72zv   0/1       Pending   0          42s</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It places a <em class="schedule">taint</em> on the chosen node with key as dedicated, value as host, and taint effect NoSchedule. This means that no pod will be able to schedule onto the node unless it has a matching toleration. As the pod has a matching <em class="schedule">toleration</em> it would get scheduled on the node and hence the status was initially Running. After few seconds, it would get updated to Pending as the addition of a new Runtime <em class="schedule">NoExecute</em> operator would make the pod un-tolerate the taint.
</td>
</tr>
</table>
</div>
<div class="sect4 schedule">
<h5 id="_clean_up_13"><a class="anchor" href="#_clean_up_13"></a><a class="link" href="#_clean_up_13">Clean-up</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 26. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 03-Node-Pod/03_.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/03-Node-Pod/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_lets_get_to_deployment"><a class="anchor" href="#_lets_get_to_deployment"></a><a class="link" href="#_lets_get_to_deployment">Let&#8217;s get to Deployment</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
<div class="paragraph schedule">
<p>A Deployment controller provides declarative updates for Pods and ReplicaSets.</p>
</div>
<div class="paragraph schedule">
<p>You describe a desired state in a Deployment object, and the Deployment controller changes the actual state to the desired state at a controlled rate. You can define Deployments to create new ReplicaSets, or to remove existing Deployments and adopt all their resources with new Deployments.</p>
</div>
<div class="paragraph schedule">
<p>In this exercise, we shall cover the following operations using K8s manifests,</p>
</div>
<div class="ulist checklist schedule">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="1" checked> <em class="schedule">Create</em> a <em class="schedule">Deployment</em></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="1" checked> Deployment <em class="schedule">Update Strategies</em></p>
</li>
</ul>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Will install all the objects to the <em class="schedule">default</em> namespace.
</td>
</tr>
</table>
</div>
<div class="sect2 schedule">
<h3 id="_deployment"><a class="anchor" href="#_deployment"></a><a class="link" href="#_deployment">Deployment</a></h3>
<div class="sect3 schedule">
<h4 id="_create_a_deployment"><a class="anchor" href="#_create_a_deployment"></a><a class="link" href="#_create_a_deployment">Create a Deployment</a></h4>
<div class="listingblock schedule">
<div class="title">List the deployments in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get deploy</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this,
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>No resources found.</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 27. Create a Deployment object by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f 04-Deployment/01.Deployment.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/01.Deployment.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/01.Deployment.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Verify the output</div>
<div class="content">
<pre class="highlight"><code>kubectl get deploy,rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         2         2            0           2m16s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      2         2         0         2m16s

NAME                               READY     STATUS    RESTARTS   AGE
pod/spring-music-846f7447f-znb58      1/1       Running   1          2m16s
pod/spring-music-846f7447f-zqfs2      1/1       Running   1          2m16s</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No need to run the clean-up script for this example.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3 schedule">
<h4 id="_update_a_deployment"><a class="anchor" href="#_update_a_deployment"></a><a class="link" href="#_update_a_deployment">Update a Deployment</a></h4>
<div class="sect4 schedule">
<h5 id="_recreate"><a class="anchor" href="#_recreate"></a><a class="link" href="#_recreate">Recreate</a></h5>
<div class="listingblock schedule">
<div class="title">List the deployments in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get deploy,rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         2         2            0           2m16s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      2         2         0         2m16s

NAME                               READY     STATUS    RESTARTS   AGE
pod/spring-music-846f7447f-znb58      1/1       Running   1          2m16s
pod/spring-music-846f7447f-zqfs2      1/1       Running   1          2m16s</code></pre>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Watch the deployment in a new window</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get deploy,rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         2         2            0           2m16s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      2         2         0         2m16s

NAME                               READY     STATUS    RESTARTS   AGE
pod/spring-music-846f7447f-znb58      1/1       Running   1          2m16s
pod/spring-music-846f7447f-zqfs2      1/1       Running   1          2m16s</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 28. Update the Deployment object by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f 04-Deployment/02.Deployment-recreate.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/02.Deployment-recreate.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/02.Deployment-recreate.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         0         0            0           9m13s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      0         0         0         9m13s

NAME                               READY     STATUS        RESTARTS   AGE
pod/spring-music-846f7447f-znb58      0/1       Terminating   0          9m13s
pod/spring-music-846f7447f-zqfs2      0/1       Terminating   0          9m13s</code></pre>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All existing Pods are killed before new ones are created when <em class="schedule">.spec.strategy.type==Recreate</em> and it doesn&#8217;t guarantee zero down time deployment
</td>
</tr>
</table>
</div>
<div class="sect5 schedule">
<h6 id="_clean_up_14"><a class="anchor" href="#_clean_up_14"></a><a class="link" href="#_clean_up_14">Clean-up</a></h6>
<div class="exampleblock schedule">
<div class="title">Example 29. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 04-Deployment/02_.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/02_.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/02_.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect4 schedule">
<h5 id="_rollingupdate"><a class="anchor" href="#_rollingupdate"></a><a class="link" href="#_rollingupdate">RollingUpdate</a></h5>
<div class="exampleblock schedule">
<div class="title">Example 30. Create a Deployment object by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f 04-Deployment/03.Deployment.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/03.Deployment.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/03.Deployment.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock schedule">
<div class="title">List the deployments in the default namespace</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get deploy,rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         2         2            0           2m16s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      2         2         0         2m16s

NAME                               READY     STATUS    RESTARTS   AGE
pod/spring-music-846f7447f-znb58      1/1       Running   1          2m16s
pod/spring-music-846f7447f-zqfs2      1/1       Running   1          2m16s</code></pre>
</div>
</div>
<div class="listingblock schedule">
<div class="title">Watch the deployment in a new window</div>
<div class="content">
<pre class="highlight"><code class="language-go-cli" data-lang="go-cli">kubectl get deploy,rs,pods</code></pre>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         2         2            0           2m16s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      2         2         0         2m16s

NAME                               READY     STATUS    RESTARTS   AGE
pod/spring-music-846f7447f-znb58      1/1       Running   1          2m16s
pod/spring-music-846f7447f-zqfs2      1/1       Running   1          2m16s</code></pre>
</div>
</div>
<div class="exampleblock schedule">
<div class="title">Example 31. Update the Deployment object by running the below file</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] <strong class="schedule">kubectl apply -f 04-Deployment/03.Deployment-rolling-update.yaml</strong></p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/03.Deployment-rolling-update.yaml" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/03.Deployment-rolling-update.yaml</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output will be similar to this
</td>
</tr>
</table>
</div>
<div class="listingblock schedule">
<div class="content">
<pre class="highlight"><code>NAME                                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.extensions/spring-music      2         0         0            0           9m13s

NAME                                           DESIRED   CURRENT   READY     AGE
replicaset.extensions/spring-music-846f7447f      0         0         0         9m13s

NAME                               READY     STATUS        RESTARTS   AGE
pod/spring-music-846f7447f-znb58      0/1       Terminating   0          9m13s
pod/spring-music-846f7447f-zqfs2      0/1       Running       0          9m13s
pod/spring-music-846f7447f-78lwx      0/1       Running       0          22s
pod/spring-music-8677d84f54-66fgh     0/1       Running       0          4s</code></pre>
</div>
</div>
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph schedule">
<p>The Deployment updates Pods in a rolling update fashion when <em class="schedule">.spec.strategy.type==RollingUpdate</em>. You can specify <em class="schedule">maxUnavailable</em> and <em class="schedule">maxSurge</em> to control the rolling update process</p>
</div>
<div class="paragraph schedule">
<p><strong class="schedule">maxUnavailable</strong> is an optional field that specifies the maximum number of Pods that can be unavailable during the update process.</p>
</div>
<div class="paragraph schedule">
<p><strong class="schedule">maxSurge</strong> is an optional field that specifies the maximum number of Pods that can be created over the desired number of Pods.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect5 schedule">
<h6 id="_clean_up_15"><a class="anchor" href="#_clean_up_15"></a><a class="link" href="#_clean_up_15">Clean-up</a></h6>
<div class="exampleblock schedule">
<div class="title">Example 32. Run the below script to undo the changes</div>
<div class="content">
<div class="paragraph schedule">
<p>[&#10004;] sh 04-Deployment/_1.clean.sh</p>
</div>
<div class="admonitionblock note schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source:
<a href="https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/_1.clean.sh" class="bare">https://github.com/srinivasa-vasu/k8s-workshop/blob/master/04-Deployment/_1.clean.sh</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_externalize_configmap"><a class="anchor" href="#_externalize_configmap"></a><a class="link" href="#_externalize_configmap">Externalize ConfigMap</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_service_discovery"><a class="anchor" href="#_service_discovery"></a><a class="link" href="#_service_discovery">Service Discovery</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_no_more_secrets"><a class="anchor" href="#_no_more_secrets"></a><a class="link" href="#_no_more_secrets">No more Secrets</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_initialize_with_a_container"><a class="anchor" href="#_initialize_with_a_container"></a><a class="link" href="#_initialize_with_a_container">Initialize with a Container</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_volume_rules"><a class="anchor" href="#_volume_rules"></a><a class="link" href="#_volume_rules">Volume Rules</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip schedule">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong class="schedule"><em class="schedule">Time to complete 30ms</em></strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 schedule">
<h2 id="_containers_gang"><a class="anchor" href="#_containers_gang"></a><a class="link" href="#_containers_gang">Containers Gang</a></h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-02-10 17:32:34 IST
</div>
</div>
</body>
</html>